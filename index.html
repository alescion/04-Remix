<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Piece Travel by GM Magnus Carlsen</title>
        <!-- Load d3.js -->
        <script src="https://d3js.org/d3.v6.min.js"></script>
    </head>
    <body>
        <div id="main">
            <script>
                const apawn = "a pawn ♟︎"
                const bpawn = "b pawn ♟︎"
                const cpawn = "c pawn ♟︎"
                const dpawn = "d pawn ♟︎"
                const epawn = "e pawn ♟︎"
                const fpawn = "f pawn ♟︎"
                const gpawn = "g pawn ♟︎"
                const hpawn = "h pawn ♟︎"
                const qrook = "queenside rook ♜"
                const qknight = "queenside knight ♞"
                const qbishop = "queenside bishop ♝"
                const queen = "queen ♛"
                const king = "king ♚"
                const kbishop = "kingside bishop ♝"
                const kknight = "kingside knight ♞"
                const krook = "kingside rook ♜"

                const apawn_b = "a pawn ♙"
                const bpawn_b = "b pawn ♙"
                const cpawn_b = "c pawn ♙"
                const dpawn_b = "d pawn ♙"
                const epawn_b = "e pawn ♙"
                const fpawn_b = "f pawn ♙"
                const gpawn_b = "g pawn ♙"
                const hpawn_b = "h pawn ♙"
                const qrook_b = "queenside rook ♖"
                const qknight_b = "queenside knight ♘"
                const qbishop_b = "queenside bishop ♗"
                const queen_b = "queen ♕"
                const king_b = "king ♔"
                const kbishop_b = "kingside bishop ♗"
                const kknight_b = "kingside knight ♘"
                const krook_b = "kingside rook ♖"

                // var distances = {};

                // distances[apawn] = 0;
                // distances[bpawn] = 0;
                // distances[cpawn] = 0;
                // distances[dpawn] = 0;
                // distances[epawn] = 0;
                // distances[fpawn] = 0;
                // distances[gpawn] = 0;
                // distances[hpawn] = 0;
                // distances[qrook] = 0;
                // distances[qknight] = 0;
                // distances[qbishop] = 0;
                // distances[queen] = 0;
                // distances[king] = 0;
                // distances[kbishop] = 0;
                // distances[kknight] = 0;
                // distances[krook] = 0;

                // distances[apawn_b] = 0;
                // distances[bpawn_b] = 0;
                // distances[cpawn_b] = 0;
                // distances[dpawn_b] = 0;
                // distances[epawn_b] = 0;
                // distances[fpawn_b] = 0;
                // distances[gpawn_b] = 0;
                // distances[hpawn_b] = 0;
                // distances[qrook_b] = 0;
                // distances[qknight_b] = 0;
                // distances[qbishop_b] = 0;
                // distances[queen_b] = 0;
                // distances[king_b] = 0;
                // distances[kbishop_b] = 0;
                // distances[kknight_b] = 0;
                // distances[krook_b] = 0;

                d3.csv("distances.csv").then(function(data) {
                    // data.forEach(function(row) {
                    //     addDistances(row)
                    // })
                    //console.log(distances)
                    loadBars(data)
                });

                function loadBars(data) {
                    console.log(data)

                    var margin = {top: 20, right: 30, bottom: 40, left: 100}
                    var width = 600 - margin.left - margin.right
                    var height = 600 - margin.top - margin.bottom

                    var svg = d3.select("#main")
                    .append("svg")
                        .attr("width", width + margin.left + margin.right)
                        .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                        .attr("transform",
                        "translate(" + margin.left + "," + margin.top + ")");

                    // X axis
                    var x = d3.scaleLinear()
                        .domain([0, 10000])
                        .range([0, width]);
                    svg.append("g")
                        .attr("transform", "translate(0," + height + ")")
                        .call(d3.axisBottom(x));
                    
                    // Y axis
                    var y = d3.scaleBand()
                        .range([0, height])
                        // .domain(Object.keys(data).map(function(d) { return d; }))
                        .domain(data.map(function(d) { return d.Name; }))
                        .padding(.1);
                    svg.append("g")
                        .call(d3.axisLeft(y))

                    // Horizontal bars
                    svg.selectAll("mybar")
                        .data(data)
                        .enter()
                        .append("rect")
                        // .attr("x", function(d) { console.log(d, x(0)); return x(0); })
                        .attr("x", x(0))
                        // .attr("y", Object.keys(data).map(function(d) { console.log(d); return y(d); }))
                        .attr("y", function(d) { return y(d.Name); })
                        // .attr("width", Object.values(data).map(function(d) { return x(d); }))
                        .attr("width", function(d) { return x(d.Distance); })
                        .attr("height", y.bandwidth())
                        .attr("fill", "black")
                       
                }

                // function addDistances(row) {
                //     if (row["Magnus Color"] == "White") {
                //         // console.log("white")
                //         distances[apawn] += parseInt(row["a pawn"]);
                //         distances[bpawn] += parseInt(row["b pawn"]);
                //         distances[cpawn] += parseInt(row["c pawn"]);
                //         distances[dpawn] += parseInt(row["d pawn"]);
                //         distances[epawn] += parseInt(row["e pawn"]);
                //         distances[fpawn] += parseInt(row["f pawn"]);
                //         distances[gpawn] += parseInt(row["g pawn"]);
                //         distances[hpawn] += parseInt(row["h pawn"]);
                //         distances[qrook] += parseInt(row["queen-side rook"]);
                //         distances[qknight] += parseInt(row["queen-side knight"]);
                //         distances[qbishop] += parseInt(row["queen-side bishop"]);
                //         distances[queen] += parseInt(row["queen"]);
                //         distances[king] += parseInt(row["king"]);
                //         distances[kbishop] += parseInt(row["king-side bishop"]);
                //         distances[kknight] += parseInt(row["king-side knight"]);
                //         distances[krook] += parseInt(row["king-side rook"]);
                //     } else {
                //         // console.log("black")
                //         distances[apawn_b] += parseInt(row["a pawn"]);
                //         distances[bpawn_b] += parseInt(row["b pawn"]);
                //         distances[cpawn_b] += parseInt(row["c pawn"]);
                //         distances[dpawn_b] += parseInt(row["d pawn"]);
                //         distances[epawn_b] += parseInt(row["e pawn"]);
                //         distances[fpawn_b] += parseInt(row["f pawn"]);
                //         distances[gpawn_b] += parseInt(row["g pawn"]);
                //         distances[hpawn_b] += parseInt(row["h pawn"]);
                //         distances[qrook_b] += parseInt(row["queen-side rook"]);
                //         distances[qknight_b] += parseInt(row["queen-side knight"]);
                //         distances[qbishop_b] += parseInt(row["queen-side bishop"]);
                //         distances[queen_b] += parseInt(row["queen"]);
                //         distances[king_b] += parseInt(row["king"]);
                //         distances[kbishop_b] += parseInt(row["king-side bishop"]);
                //         distances[kknight_b] += parseInt(row["king-side knight"]);
                //         distances[krook_b] += parseInt(row["king-side rook"]);
                //     }
                // }
                
            </script>
        </div>
    </body>
</html>
